{
  "services": [
    {
      "name": "kutt",
      "image": "kutt/kutt:latest",
      "isMain": true,
      "internalPort": 3000,
      "environment": {
        "JWT_SECRET": "${JWT_SECRET}",
        "DEFAULT_DOMAIN": "${KUTT_DEFAULT_DOMAIN}",
        "DB_HOST": "kutt-db",
        "DB_PORT": "5432",
        "DB_NAME": "kutt",
        "DB_USER": "tipi",
        "DB_PASSWORD": "${KUTT_DB_PASSWORD}"
      },
      "dependsOn": ["kutt-db"]
    },
    {
      "name": "kutt-db",
      "image": "postgres:16-alpine",
      "isMain": false,
      "internalPort": 5432,
      "environment": {
        "POSTGRES_USER": "tipi",
        "POSTGRES_PASSWORD": "${KUTT_DB_PASSWORD}",
        "POSTGRES_DB": "kutt"
      },
      "volumes": [
        { "hostPath": "${APP_DATA_DIR}/data/postgres", "containerPath": "/var/lib/postgresql/data" }
      ]
    }
  ],
  "schemaVersion": 2,
  "$schema": "https://schemas.runtipi.io/v2/dynamic-compose.json"
}
